<app-admin-sidebar></app-admin-sidebar>
<app-admin-top-menu></app-admin-top-menu>  
  
  <div class="content">
    <div class="content-wrapper">
            <h2><strong>Settings</strong></h2>
      <hr/>
      <div class="row">
        
        <div class="col-4">
          <div class="card shadow">
              <div class="card-body">

                <h6 class="card-title"><strong>Account</strong></h6>
                <hr/>
           <ul class="settings-menu">
              <li><a  class="card-text" (click)="toggleForms('form1')"><img src="assets/images/iconamoon_profile-light.svg" > Edit Profile</a></li>
              <li><a  class="card-text" (click)="toggleForms('form2')"><img src="assets/images/material-symbols_privacy-tip-outline.svg" > Security</a></li>
          </ul>
       </div>
       </div>
       </div>
        

        <div class="col-7">

            <form [formGroup]="profileForm" *ngIf="currentForm === 'form1'" >
               
                <fieldset>
              
                  <label for="email" >First Name</label>
                  <input type="text" id="name" name="user_name" formControlName="firstName" placeholder="First Name">
                  <div
                  *ngIf="profile['firstName'].invalid && (profile['firstName'].dirty || profile['firstName'].touched)"
                  class="alert alert-danger" style=" width: 800px; border-radius: 4px;" >
                  <span *ngIf="profile['firstName'].errors?.['required']" style="color:#f98f8f;">First name is required</span>
                  <span *ngIf="profile['firstName'].errors?.['containsNumbers']" style="color:#f98f8f">Please enter valid First name</span>
                   </div>

                   <label for="email" >Last Name</label>
                   <input type="text" id="name" name="last-name" formControlName="lastName" placeholder="Last Name">
                   <div
                   *ngIf="profile['lastName'].invalid && (profile['lastName'].dirty || profile['lastName'].touched)"
                   class="alert alert-danger" style=" width: 800px; border-radius: 4px;" >
                   <span *ngIf="profile['lastName'].errors?.['required']" style="color:#f98f8f;">Last name is required</span>
                   <span *ngIf="profile['lastName'].errors?.['containsNumbers']" style="color:#f98f8f">Please enter valid last name</span>
                    </div>
                   <label for="email" class="input-fields">Email</label>
                  <input type="email" id="mail" name="user_email" formControlName="email" placeholder="Company Email">
                  <div
                  *ngIf="profile['email'].invalid && (profile['email'].dirty || profile['email'].touched)"
                  class="alert alert-danger">
                  <span *ngIf="profile['email'].errors?.['required']" style="color:#f98f8f">Email is required</span>
                  <span *ngIf="profile['email'].errors?.['email']" style="color:#f98f8f">Please enter valid email</span>
                   </div>
                   <!--
                   <label for="password" class="input-fields">Password</label>
                   <input type="password" id="password" name="user_password" formControlName="password">
                   <div
                   *ngIf="profile['password'].invalid && (profile['password'].dirty || profile['password'].touched)"
                   class="alert alert-danger">
                   <span *ngIf="profile['password'].errors?.['required']" style="color:#f98f8f">Password is required</span>
                    </div>

                    <label for="password" class="input-fields">Date Of Birth</label>
                   <input type="text" id="dob" name="user_dob" formControlName="dob">
                   <div
                   *ngIf="profile['dob'].invalid && (profile['dob'].dirty || profile['dob'].touched)"
                   class="alert alert-danger">
                   <span *ngIf="profile['dob'].errors?.['required']" style="color:#f98f8f">Date of birth is required</span>
                    </div>

                  
                  <label for="dob" >Date Of Birth</label>

                  <div class="dateInput">
                    <input matInput [matDatepicker]="picker" formControlName="dob" placeholder="Choose a date" style="width: calc(100% - 24px); /* Subtracting the width of the toggler */">
                    <mat-datepicker-toggle matSuffix [for]="picker" style="position: absolute; right: 0;"></mat-datepicker-toggle>
                  </div>
                  <mat-datepicker #picker panelClass="datepickerTwo"></mat-datepicker>
                  <div
                  *ngIf="profile['dob'].invalid && (profile['dob'].dirty || profile['dob'].touched)"
                  class="alert alert-danger" style="width: 750px; border-radius: 4px;">
                  <span *ngIf="profile['dob'].errors?.['required']" style="color:#f98f8f;">Expiry date is required</span>
                  </div>

                    <label for="country" class="input-fields">Country</label>
                   <input type="text" id="country" name="user_country" formControlName="country">
                   <div
                   *ngIf="profile['country'].invalid && (profile['country'].dirty || profile['country'].touched)"
                   class="alert alert-danger">
                   <span *ngIf="profile['country'].errors?.['required']" style="color:#f98f8f">Country is required</span>
                    </div>-->
                </fieldset>

                <label for="country" class="input-fields"> Profile Image</label>

                <input type="file" #fileInput style="display: none;" (change)="onFileSelected($event)"/>

                <button type="button" class="attachButton" type="file" (click)="fileInput.click()">
                  Choose File
                </button>  
                
                 
               
                <button type="submit" class="nextButton" [disabled]="profileForm.invalid || showSpinner" (click)="saveChanges()">
                  <span *ngIf="!showSpinner">Save changes</span>
                  <div *ngIf="showSpinner" class="spinner"></div>
                </button>                
            </form>

            <!--Change password Form-->
            <form [formGroup]="passwordForm" *ngIf="currentForm === 'form2'" >
               
              <fieldset>
            
               
                 
                 <label for="old_password" class="input-fields">Old Password</label>
                 <input type="password" id="password" name="user_password" formControlName="old_password">
                 <div
                 *ngIf="password['old_password'].invalid && (password['old_password'].dirty || password['old_password'].touched)"
                 >
                 <div *ngIf="password['old_password'].errors?.['required']" class="alert alert-danger" style="color:#f98f8f">Old password is required</div>
                 <div *ngIf="password['old_password'].errors?.['minlength']" class="alert alert-danger" style="color:#f98f8f">Password must be at least 8 characters long.</div>
                 <div *ngIf="password['old_password'].errors?.['maxlength']" class="alert alert-danger" style="color:#f98f8f">Password must be less then 12 characters long.</div>

                  </div>

                  <label for="new_password" class="input-fields">New Password</label>
                  <input type="password" id="password" name="user_password" formControlName="new_password">
                  <div
                  *ngIf="password['new_password'].invalid && (password['new_password'].dirty || password['new_password'].touched)"
                  class="alert alert-danger">
                  <span *ngIf="password['new_password'].errors?.['required']"  style="color:#f98f8f" >New password is required</span>
                  <div *ngIf="password['new_password'].errors?.['minlength']" style="color:#f98f8f">Password must be at least 8 characters long.</div>
                  <div *ngIf="password['new_password'].errors?.['maxlength']" style="color:#f98f8f">Password must be less then 12 characters long.</div>
 
                
                </div>

                   <label for="confirm_password" class="input-fields">Confirm Password</label>
                   <input type="password" id="password" name="user_password" formControlName="confirm_password">
                   <div
                   *ngIf="password['confirm_password'].invalid && (password['confirm_password'].dirty || password['confirm_password'].touched)"
                   class="alert alert-danger">
                   <span *ngIf="password['confirm_password'].getError('required')" style="color:#f98f8f">Please confirm your password</span>
                   <span *ngIf="password['confirm_password'].errors?.['MustMatch']" style="color:#f98f8f">Password does not match</span>

                    </div>
 
              </fieldset>

              <button type="submit" class="nextButton" [disabled]="passwordForm.invalid || showSpinner" (click)="changesPassword()">
                <span *ngIf="!showSpinner">Save Password</span>
                <div *ngIf="showSpinner" class="spinner"></div>
              </button>              
          </form>
            <!--Success message-->
              
            <div *ngIf="successMessage">
              <div class="alert alert-success" role="alert" style="width: 800px">
                  {{ successMessage }}
            </div>
             </div>

          

   
        </div>

       
      </div>
     
      </div>

     

    

    
  </div>

  

  


